<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Chess Arena Pi â€” Classic</title>
<style>
  :root{ --bg:#222; --fg:#fff; --gold:#ffcc00; --btn:#2196f3; --btnh:#0b79d0; }
  body{
    margin:0; min-height:100vh; display:flex; align-items:center; justify-content:center;
    background:var(--bg); color:var(--fg); font-family:system-ui,Arial; padding:24px;
  }

  .wrap{ display:flex; flex-direction:column; align-items:center; gap:18px; }

  /* orbit wrapper */
  .orbit-wrap{ position:relative; width:110px; height:110px; }
  .pi-symbol{
    position:absolute; inset:0; display:flex; align-items:center; justify-content:center;
    font-size:36px; font-weight:700; color:#222; background:var(--gold); width:46px; height:46px;
    border-radius:50%; left:50%; top:50%; transform:translate(-50%,-50%); z-index:2;
    box-shadow:0 4px 10px rgba(0,0,0,0.35);
  }

  /* orbit (rotating container) */
  .orbit {
    position:absolute; inset:0; width:100%; height:100%; display:block; left:0; top:0;
    animation: orbit-rotate 4s linear infinite;
    pointer-events:none;
  }
  @keyframes orbit-rotate { from{ transform:rotate(0deg) } to{ transform:rotate(360deg) } }

  /* dots positioned around centre using fixed angles */
  .orbit-dot{
    position:absolute; width:10px; height:10px; border-radius:50%; background:var(--gold);
    top:50%; left:50%; transform: translate(-50%,-50%) rotate(var(--deg)) translate(42px) rotate(calc(-1 * var(--deg)));
    /* second rotate cancels the dot rotation so it stays circular facing upright */
  }

  /* Dropdown / button styles */
  .dropdown { position:relative; }
  .dropbtn{
    background:var(--btn); color:white; padding:12px 20px; border-radius:10px; border:0;
    font-size:16px; cursor:pointer;
  }
  .dropbtn:hover{ background:var(--btnh); }
  .dropdown-content{
    display:none; position:absolute; top:calc(100% + 8px); left:0; background:#2b2b2b; border-radius:8px;
    min-width:180px; box-shadow:0 10px 30px rgba(0,0,0,0.35); overflow:hidden;
  }
  .dropdown-content a{
    display:block; padding:10px 14px; color:var(--fg); text-decoration:none; border-bottom:1px solid rgba(255,255,255,0.03);
  }
  .dropdown-content a:last-child{ border-bottom:none; }
  .dropdown-content a:hover{ background:#3b3b3b; }
  .dropdown:hover .dropdown-content{ display:block; }

  /* status */
  #sdkStatus{ font-size:13px; color:#ffd; margin-top:6px; text-align:center; }
  @media(max-width:420px){ .pi-symbol{ font-size:28px; width:40px;height:40px } }
</style>
</head>
<body>
  <div class="wrap" role="main" aria-label="Chess Arena Classic">
    <div class="orbit-wrap" aria-hidden="true">
      <div class="pi-symbol">Ï€</div>

      <div class="orbit" aria-hidden="true">
        <span class="orbit-dot" style="--deg:0deg"></span>
        <span class="orbit-dot" style="--deg:45deg"></span>
        <span class="orbit-dot" style="--deg:90deg"></span>
        <span class="orbit-dot" style="--deg:135deg"></span>
        <span class="orbit-dot" style="--deg:180deg"></span>
        <span class="orbit-dot" style="--deg:225deg"></span>
        <span class="orbit-dot" style="--deg:270deg"></span>
        <span class="orbit-dot" style="--deg:315deg"></span>
      </div>
    </div>

    <div class="dropdown" aria-label="mode selector">
      <button class="dropbtn" id="menuBtn">Choose Match â–¾</button>
      <div class="dropdown-content" role="menu" aria-labelledby="menuBtn">
        <a href="#" role="menuitem" id="inviteLink">Invite Friend</a>
        <a href="#" role="menuitem" id="randomLink">Random Opponent</a>
        <a href="#" role="menuitem" id="aiLink">Play vs AI</a>
      </div>
    </div>

    <div id="sdkStatus" aria-live="polite">ðŸ”„ Detecting Pi SDKâ€¦</div>
  </div>

  <!-- Pi SDK (will be present inside Pi Browser sandbox) -->
  <script src="https://sdk.minepi.com/pi-sdk.js"></script>
  <script>
    // --- Bind links first (safe even if script later fails) ---
    document.getElementById('inviteLink').addEventListener('click', function(evt){
      evt.preventDefault();
      // direct redirect â€” payments / pairing handled inside game.html
      window.location.href = 'game.html?mode=invite';
    });
    document.getElementById('randomLink').addEventListener('click', function(evt){
      evt.preventDefault();
      window.location.href = 'game.html?mode=random';
    });
    document.getElementById('aiLink').addEventListener('click', function(evt){
      evt.preventDefault();
      window.location.href = 'ai.html?method=pay';
    });

    // --- SDK detection & status update (non-blocking) ---
    const sdkStatusEl = document.getElementById('sdkStatus');
    function setStatus(text){
      sdkStatusEl.textContent = text;
    }

    (function initPi(){
      // Defensive: only attempt to init if Pi object exists
      try {
        if (window.Pi && typeof Pi.init === 'function') {
          // sandbox true so it works for testing in Pi Browser sandbox
          Pi.init({ version: "2.0", sandbox: true, appId: "chess-world-pi" });
          setStatus('âœ… Pi SDK initialized (sandbox)');
        } else {
          setStatus('â„¹ï¸ Pi SDK not available (running outside Pi Browser)');
        }
      } catch (err) {
        console.warn('Pi init error', err);
        setStatus('âš ï¸ Pi SDK init failed');
      }
      // hide status after a short delay so UI stays clean (optional)
      setTimeout(()=>{ /* keep status visible for transparency */ }, 1200);
    })();
  </script>
</body>
</html>
